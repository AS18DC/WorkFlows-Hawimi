{
  "createdAt": "2025-09-03T03:07:39.012Z",
  "updatedAt": "2025-11-08T15:49:22.000Z",
  "id": "7b6GPNJl26pzj47A",
  "name": "agent seller",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "updates": [
          "messages"
        ],
        "options": {
          "messageStatusUpdates": []
        }
      },
      "id": "37eea92c-0269-4236-81a2-ea6caea57720",
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "position": [
        320,
        1328
      ],
      "webhookId": "d3978cae-2aca-4553-8ac7-ab89068deabc",
      "typeVersion": 1,
      "credentials": {
        "whatsAppTriggerApi": {
          "id": "Frm1ejv86hwxo9x0",
          "name": "WhatsApp OAuth account"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "id": "c6bcafb8-d27a-440a-a139-2bfa2bb8981e",
      "name": "Download Image",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1744,
        1360
      ],
      "typeVersion": 4.2,
      "credentials": {
        "httpHeaderAuth": {
          "id": "EaTYSKoX0hYQ90Yk",
          "name": "whatsapp"
        }
      }
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "GPT-4O-MINI"
        },
        "text": "=You are an advanced image description AI assistant . Your primary function is to provide detailed, accurate descriptions of images submitted through WhatsApp.\n\nCORE FUNCTIONALITY:\n- When presented with an image, you will analyze it thoroughly and provide a comprehensive description in English.\n- Your descriptions should capture both the obvious and subtle elements within the image.\n\nIMAGE DESCRIPTION GUIDELINES:\n- Begin with a broad overview of what the image contains\n- Describe key subjects, people, objects, and their relationships\n- Note significant visual elements such as colors, lighting, composition, and perspective\n- Identify any text visible in the image\n- Describe the setting or environment\n- Mention any notable actions or events taking place\n- Comment on mood, tone, or atmosphere when relevant\n- If applicable, identify landmarks, famous people, or cultural references\n\nRESPONSE FORMAT:\n- Start with \"Image Description:\" followed by your analysis\n- Structure your description in a logical manner (general to specific)\n- Use clear, precise language appropriate for visual description\n- Format longer descriptions with paragraphs to enhance readability\n- End with any notable observations that might require special attention\n\nLIMITATIONS:\n- If the image is blurry, low resolution, or difficult to interpret, acknowledge these limitations\n- If an image contains potentially sensitive content, provide a factual description without judgment\n- Do not make assumptions about elements that cannot be clearly determined\n\nYour descriptions should be informative, objective, and thorough, enabling someone who cannot see the image to form an accurate mental picture of its contents.",
        "inputType": "base64",
        "options": {
          "detail": "auto"
        }
      },
      "id": "b4c9f07b-7698-4887-8496-1cf55a4fbf45",
      "name": "Analyze Image",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1984,
        1360
      ],
      "typeVersion": 1.8,
      "credentials": {
        "openAiApi": {
          "id": "lfcl7qo2bx0aQmQ6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "id": "63cafcbb-7589-4cde-a69b-1615ed0d43ea",
      "name": "Download Audio",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1744,
        1056
      ],
      "typeVersion": 4.2,
      "credentials": {
        "httpHeaderAuth": {
          "id": "EaTYSKoX0hYQ90Yk",
          "name": "whatsapp"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "id": "2d014946-e791-43b1-b095-196b6e626e7a",
      "name": "Transcribe Audio",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1984,
        1056
      ],
      "typeVersion": 1.8,
      "credentials": {
        "openAiApi": {
          "id": "lfcl7qo2bx0aQmQ6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}",
        "options": {
          "systemMessage": "=1. Rol y Objetivo Principal\nEres: Un Agente de Ventas de IA experto.\n\nTu Especialidad: Vender agentes de inteligencia artificial personalizados, desarrollados sobre la plataforma n8n.\n\nTu Objetivo: Identificar las necesidades de los clientes potenciales, explicarles cÃ³mo tus agentes pueden optimizar sus operaciones y guiarlos en el proceso de compra.\n\n2. Contexto del Producto\nProducto Principal: Agentes de IA personalizables creados con n8n.\n\nPropuesta de Valor Clave: La integraciÃ³n total. Debes subrayar que estos agentes se pueden conectar y sincronizar con prÃ¡cticamente cualquier plataforma, software o API que el cliente ya utilice (CRMs, ERPs, redes sociales, bases de datos, herramientas de marketing, etc.).\n\nFuncionalidades: Los agentes pueden automatizar tareas, gestionar comunicaciones con clientes, analizar datos en tiempo real, calificar leads, y mucho mÃ¡s.\n\n3. Protocolo de InteracciÃ³n Obligatorio\nAquÃ­ se definen las reglas que debes seguir sin excepciÃ³n en tu conversaciÃ³n.\n\nRegla #0: Preguntas estrategicas\nFuncion: hacer preguntas con el fin de obtener informaciÃ³n clave, analizar una situaciÃ³n compleja o guiar una conversaciÃ³n o proceso de toma de decisiones.\n    Respuesta Ambiguous o Incompleta: El agente recibe una respuesta que carece de claridad, detalles cruciales, o no aborda completamente el tema. Ejemplo: El usuario dice \"Quiero mejorar el rendimiento\", sin especificar si es de ventas, software, o personal.\n    DeclaraciÃ³n de un Objetivo o Problema: El usuario establece una meta, un desafÃ­o, o una necesidad. El agente necesita profundizar para entender el \"por quÃ©,\" \"cÃ³mo,\" o \"para quiÃ©n.\" Ejemplo: \"Necesito comprar una nueva herramienta de software.\"\n    Cambio de Tema o DirecciÃ³n: La conversaciÃ³n se desvÃ­a, y el agente necesita re-enfocarla o validar el nuevo camino.\n    Solicitud de Ayuda para la Toma de Decisiones: El usuario pide consejo o una recomendaciÃ³n, obligando al agente a recopilar los criterios de decisiÃ³n.\n\n\nRegla #1: CualificaciÃ³n GeogrÃ¡fica para Precios\nDisparador: Cuando un cliente pregunte por el precio, el costo, o muestre una intenciÃ³n clara de compra.\n\nAcciÃ³n Obligatoria: Debes preguntar su paÃ­s antes de dar cualquier cifra.\n\nFrase Exacta o Similar:\n\n\"Para poder ofrecerte un precio preciso y ajustado a tu regiÃ³n, Â¿podrÃ­as indicarme desde quÃ© paÃ­s nos contactas?\"\n\nRegla #2: Descargo de Responsabilidad (Disclaimer)\nDisparador: En tu primer o segundo mensaje de la conversaciÃ³n.\n\nAcciÃ³n Obligatoria: Debes recordar al usuario tu naturaleza como IA y la posibilidad de error.\n\nFrase Exacta o Similar:\n\n\"Es importante que sepas que soy un agente de IA. Estoy aquÃ­ para ayudarte con toda la informaciÃ³n que necesites, pero como toda inteligencia artificial, puedo cometer equivocaciones. Mi objetivo es ser lo mÃ¡s preciso posible.\"\n\nRegla #3: EscalaciÃ³n a un Humano\nDisparador: Si el cliente expresa frustraciÃ³n, presenta un problema tÃ©cnico que no puedes solucionar, una queja formal, o si solicita explÃ­citamente hablar con una persona.\n\nAcciÃ³n Obligatoria: No intentes resolver el problema si estÃ¡ fuera de tu alcance. Inicia el proceso de transferencia a un humano.\n\nFrase Exacta o Similar:\n\n\"Entiendo. Esta consulta requiere la atenciÃ³n de un especialista. Para asegurarte la mejor asistencia, voy a transferir inmediatamente tu caso a un miembro humano de mi equipo. Ã‰l se pondrÃ¡ en contacto contigo a la brevedad.\"\n\n4. Tono y Personalidad\nConsultivo: ActÃºa como un asesor experto. Haz preguntas para entender los desafÃ­os del cliente antes de proponer una soluciÃ³n.\n\nProfesional y Servicial: MantÃ©n un lenguaje cortÃ©s, claro y amigable en todo momento.\n\nEficiente: Ve al grano, pero sin ser brusco. Valora el tiempo del cliente."
        }
      },
      "id": "4f7061ff-031e-4b6f-87ca-62f1b840d750",
      "name": "AI Agent1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1184,
        2464
      ],
      "typeVersion": 1.8
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "id": "1da533ac-aae2-4711-8ccd-0879e090bfb1",
      "name": "Download File",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1744,
        1696
      ],
      "typeVersion": 4.2,
      "credentials": {
        "httpHeaderAuth": {
          "id": "EaTYSKoX0hYQ90Yk",
          "name": "whatsapp"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "id": "92546c26-455d-44c3-8352-7b14017010c2",
      "name": "Extract from File",
      "type": "n8n-nodes-base.extractFromFile",
      "position": [
        2000,
        1696
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $('WhatsApp Trigger').item.json.messages[0].document.id }}"
      },
      "id": "39b71c27-b7fe-48cc-af96-41c2b009fa4b",
      "name": "Get File Url",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1520,
        1696
      ],
      "webhookId": "280bd5de-32d7-4d8f-93d2-e91e3b0bc161",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "f52d2aaa-e0b2-45e5-8c4b-ceef42182a0d",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.messages[0].document.mime_type }}",
              "rightValue": "application/pdf"
            }
          ]
        },
        "options": {}
      },
      "id": "fd85932b-3ff2-4781-80dc-cffe4d8d5188",
      "name": "Only PDF File",
      "type": "n8n-nodes-base.if",
      "position": [
        1248,
        1728
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "jsCode": "for (const item of $input.all()) {\n  if (item.binary) {\n    const binaryPropertyNames = Object.keys(item.binary);\n    for (const propName of binaryPropertyNames) {\n      if (item.binary[propName].mimeType === 'audio/mp3') {\n        item.binary[propName].mimeType = 'audio/mpeg';\n      }\n    }\n  }\n}\n\nreturn $input.all();"
      },
      "id": "a2ce8468-dcbf-4484-aab2-d85a6e94c94d",
      "name": "Fix mimeType for Audio",
      "type": "n8n-nodes-base.code",
      "position": [
        2064,
        2320
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "714445351761280",
        "recipientPhoneNumber": "={{ $('Input type').item.json.contacts[0].wa_id }}",
        "messageType": "audio",
        "mediaPath": "useMedian8n",
        "additionalFields": {}
      },
      "id": "a2730299-2e87-4d08-acac-e978d224f65d",
      "name": "Send audio",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        2288,
        2320
      ],
      "webhookId": "d18b2c98-84e4-43cf-a532-0c47d5161684",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "714445351761280",
        "recipientPhoneNumber": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "textBody": "=Sorry but you can only send PDF files",
        "additionalFields": {}
      },
      "id": "b6acf12b-9185-4989-af2f-ded04c34f8e1",
      "name": "Incorrect format",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1520,
        1936
      ],
      "webhookId": "23834751-5066-48ba-8e19-549680df2b27",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c53cd9f9-77c1-4331-98ff-bfc9bdf95a3c",
              "name": "text",
              "type": "string",
              "value": "={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}"
            }
          ]
        },
        "options": {}
      },
      "id": "69538b26-44aa-4ace-999f-71ad1958b9ed",
      "name": "Text",
      "type": "n8n-nodes-base.set",
      "position": [
        2272,
        720
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "219577d5-b028-48fc-90be-980f4171ab68",
              "name": "text",
              "type": "string",
              "value": "={{ $json.text }}"
            }
          ]
        },
        "options": {}
      },
      "id": "b659c3d1-722e-4fc1-81f3-27a3432f635c",
      "name": "Audio",
      "type": "n8n-nodes-base.set",
      "position": [
        2272,
        1056
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "67552183-de2e-494a-878e-c2948e8cb6bb",
              "name": "text",
              "type": "string",
              "value": "=User request on the image:\n{{ \"Describe the following image\" || $('WhatsApp Trigger').item.json.messages[0].image.caption }}\n\nImage description:\n{{ $json.content }}"
            }
          ]
        },
        "options": {}
      },
      "id": "28c6f694-40b4-4258-99ac-7c019531d94d",
      "name": "Image",
      "type": "n8n-nodes-base.set",
      "position": [
        2240,
        1360
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "67552183-de2e-494a-878e-c2948e8cb6bb",
              "name": "text",
              "type": "string",
              "value": "=User request on the file:\n{{ \"Describe this file\" || $('Only PDF File').item.json.messages[0].document.caption }}\n\nFile content:\n{{ $json.text }}"
            }
          ]
        },
        "options": {}
      },
      "id": "32a74e5a-572a-4d34-942f-5521e03f5a70",
      "name": "File",
      "type": "n8n-nodes-base.set",
      "position": [
        2272,
        1696
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "714445351761280",
        "recipientPhoneNumber": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "textBody": "=You can only send text messages, images, audio files and PDF documents.",
        "additionalFields": {}
      },
      "id": "e9a6db4e-7517-47f0-9f9c-1b0bea9ecabf",
      "name": "Not supported",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        768,
        1600
      ],
      "webhookId": "23834751-5066-48ba-8e19-549680df2b27",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $('WhatsApp Trigger').item.json.messages[0].image.id }}"
      },
      "id": "c46884e3-77ce-45a1-8de8-a0092b99a201",
      "name": "Get Image Url",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1504,
        1360
      ],
      "webhookId": "280bd5de-32d7-4d8f-93d2-e91e3b0bc161",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $('WhatsApp Trigger').item.json.messages[0].audio.id }}"
      },
      "id": "3e851ea8-218f-4982-84fb-f4fe120b0952",
      "name": "Get Audio Url",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1488,
        1056
      ],
      "webhookId": "87caa300-7204-47b5-959a-94f4a8fbf8cf",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "input": "={{ $('AI Agent1').item.json.output }}",
        "voice": "nova",
        "options": {
          "speed": 1.3
        }
      },
      "id": "b86aa88f-d598-4c44-aee2-26c3d180aec6",
      "name": "Generate Audio Response",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1872,
        2320
      ],
      "typeVersion": 1.8,
      "credentials": {
        "openAiApi": {
          "id": "lfcl7qo2bx0aQmQ6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Text",
        "height": 240,
        "width": 1340
      },
      "id": "f30b8670-6b1d-44c1-a147-6840a7e27c16",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        688
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## Voice",
        "height": 240,
        "width": 1340
      },
      "id": "d92261b4-8f25-4b03-8adf-e7c8f224c690",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        1008
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## Image",
        "height": 240,
        "width": 1340
      },
      "id": "4cf3d24f-840b-4218-801d-f5d3655811cf",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        1328
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## Document",
        "height": 240,
        "width": 1340
      },
      "id": "7f259c02-317f-4949-b00f-c91af2b41aa0",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        1664
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## Response",
        "height": 600,
        "width": 1340,
        "color": 5
      },
      "id": "2b14a4c6-0f2e-41df-9be2-cd9942e3341f",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        2208
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "b9d1d759-f585-4791-a743-b9d72951e77c",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              },
              "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].audio }}",
              "rightValue": ""
            }
          ]
        },
        "options": {}
      },
      "id": "aa568f2a-3443-4120-bd07-634a2053bbe0",
      "name": "From audio to audio?",
      "type": "n8n-nodes-base.if",
      "position": [
        1600,
        2464
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "08fd0c80-307e-4f45-b1de-35192ee4ec5e",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].text.body }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Text"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "b7b64446-f1ea-4622-990c-22f3999a8269",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].audio }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Voice"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "202af928-a324-411a-bf15-68a349e7bf9e",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].image }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Image"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "c63299e9-6069-4bc6-afb9-7beebf6e3d69",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].document }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Document"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "id": "db378d1c-6d34-4b7c-a4f6-f0e3e4879b8b",
      "name": "Input type",
      "type": "n8n-nodes-base.switch",
      "position": [
        608,
        1280
      ],
      "typeVersion": 3.2
    },
    {
      "parameters": {
        "content": "How to obtain Whatsapp API?\n\n\n### âœ… Prerequisites\nBefore you begin, make sure you have:\n- A **Meta Business Account**\n- A **Facebook Developer Account**\n- A **Verified Business**\n- A **Phone Number** to link to WhatsApp\n- Access to **Meta's Graph API Explorer** or **Meta for Developers portal**\n\n---\n\n### ðŸªœ STEP 1: Create a Meta App\n\n1. Go to [https://developers.facebook.com/apps](https://developers.facebook.com/apps)\n2. Click **â€œCreate Appâ€**\n3. Choose **\"Business\"** as the app type, then click **Next**\n4. Give your app a name and enter a contact email\n5. Choose your Business Account (or create one)\n6. Click **Create App**\n\n---\n\n### ðŸªœ STEP 2: Add WhatsApp Product\n\n1. In your app dashboard, scroll down to **\"Add a Product\"**\n2. Find **\"WhatsApp\"** and click **â€œSet Upâ€**\n3. Link your **Business Manager Account**\n\n---\n\n### ðŸªœ STEP 3: Create a WhatsApp Business Account (if needed)\n\n1. If you havenâ€™t already, go to [https://business.facebook.com/](https://business.facebook.com/)\n2. Click **â€œCreate Accountâ€**, and complete your business information\n3. Go to **Business Settings > Accounts > WhatsApp Accounts**\n4. Add a **Phone Number** (you'll receive a verification code)\n\n---\n\n### ðŸªœ STEP 4: Generate a Temporary Access Token (for development)\n\n1. In the **App Dashboard**, go to **WhatsApp > Getting Started**\n2. Choose your test phone number\n3. Copy the **temporary access token** (valid for 24 hours)\n4. Copy the **Phone Number ID** and **WhatsApp Business Account ID**\n\nâœ… Save these 3 values:\n- **Access Token**\n- **Phone Number ID**\n- **WABA ID**\n\nðŸ“ Tip: For production, you will later need to create a **permanent token** (see step 7).\n\n---\n\n### ðŸªœ STEP 5: Set Up a Webhook URL (n8n)\n\n1. In n8n, set up a **Webhook node** (or use the `WhatsApp Trigger` node)\n2. Copy the webhook URL\n3. In the Meta Developer Dashboard:\n   - Go to **WhatsApp > Configuration**\n   - Click **â€œEdit Callback URLâ€**\n   - Paste your n8n webhook URL and add a random **verify token**\n4. In n8n, configure your webhook to respond to the verification request\n\n---\n\n### ðŸªœ STEP 6: Subscribe to Webhook Fields\n\n1. Still under **WhatsApp > Configuration**, click **\"Manage Subscriptions\"**\n2. Enable:\n   - `messages`\n   - `message_status`\n   - (Optionally `message_template_status_update`)\n\n---\n\n### ðŸªœ STEP 7: (Optional but recommended) Generate a Permanent Token\n\n1. Go to [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)\n2. Select your app\n3. Click **Get Token > System User Token**\n4. Select the permissions:\n   - `whatsapp_business_management`\n   - `whatsapp_business_messaging`\n   - `business_management`\n5. Click **Generate Token**\n6. Copy and securely store this token\n\n---\n\n### ðŸªœ STEP 8: Configure Credentials in n8n\n\n1. Go to **n8n > Settings > Credentials**\n2. Create new credentials of type **HTTP Header Auth**\n   - **Name:** WhatsApp\n   - **Header Name:** `Authorization`\n   - **Value:** `Bearer <your_access_token>`\n3. Save\n\nThen, in your workflows:\n- Use the HTTP Request node or WhatsApp node\n- Set the `phone_number_id` in the node parameters\n- Connect it to your WhatsApp credential\n\n---\n\n### ðŸ§ª STEP 9: Test the Connection\n\n1. Use a WhatsApp number to send a message to your business phone\n2. Your n8n workflow should be triggered\n3. You can now send and receive messages programmatically ðŸŽ‰\n",
        "height": 2680,
        "width": 780,
        "color": 3
      },
      "id": "10fb678c-fb75-430b-8bc8-885ba0109495",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -512,
        128
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "id": "9f1e9dfd-020b-421c-bddf-52de0ee8af5c",
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1184,
        2688
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "lfcl7qo2bx0aQmQ6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "=memory_{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}",
        "contextWindowLength": 10
      },
      "id": "c16f4ed4-3c78-4e50-9582-3d18e150f32e",
      "name": "Simple Memory1",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        1328,
        2688
      ],
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "714445351761280",
        "recipientPhoneNumber": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "textBody": "={{ $json.output }}",
        "additionalFields": {}
      },
      "id": "2ce6c669-fe83-428e-91fa-58aaf17f2a04",
      "name": "Send message1",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1872,
        2608
      ],
      "webhookId": "23834751-5066-48ba-8e19-549680df2b27",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "cGCQbLfVYtNHABW8",
          "name": "WhatsApp account 3"
        }
      }
    }
  ],
  "connections": {
    "File": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Audio": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Image": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "From audio to audio?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Input type": {
      "main": [
        [
          {
            "node": "Text",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Audio Url",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Image Url",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Only PDF File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Not supported",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get File Url": {
      "main": [
        [
          {
            "node": "Download File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze Image": {
      "main": [
        [
          {
            "node": "Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download File": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Audio Url": {
      "main": [
        [
          {
            "node": "Download Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Image Url": {
      "main": [
        [
          {
            "node": "Download Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Only PDF File": {
      "main": [
        [
          {
            "node": "Get File Url",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Incorrect format",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Audio": {
      "main": [
        [
          {
            "node": "Transcribe Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Image": {
      "main": [
        [
          {
            "node": "Analyze Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcribe Audio": {
      "main": [
        [
          {
            "node": "Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Trigger": {
      "main": [
        [
          {
            "node": "Input type",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "From audio to audio?": {
      "main": [
        [
          {
            "node": "Generate Audio Response",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fix mimeType for Audio": {
      "main": [
        [
          {
            "node": "Send audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Audio Response": {
      "main": [
        [
          {
            "node": "Fix mimeType for Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory1": {
      "ai_memory": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "ea35a3bf-82d5-4ec4-bd96-fc6ee2a10b40",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-09-03T03:07:39.018Z",
      "updatedAt": "2025-09-03T03:07:39.018Z",
      "role": "workflow:owner",
      "workflowId": "7b6GPNJl26pzj47A",
      "projectId": "vmy1v6GvUEx0NXtc"
    }
  ],
  "tags": []
}